@model IEnumerable<BibliotecaMetropoli.Models.Recurso>

    @{
    ViewData["Title"] = "Resultados de Búsqueda";
    }

    <h1>Resultados de Búsqueda</h1>
    <hr />

    @if (Model != null && Model.Any())
{
    <div class="alert alert-success" role="alert">
        Se encontraron <strong>@Model.Count()</strong> recursos que coinciden con su búsqueda.
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Título</th>
                <th>Autores</th>
                <th>Editorial</th>
                <th>Tipo</th>
                <th>Año</th>
                <th>Palabras Clave</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
            <tr>
                <td>@item.Titulo</td>
                <td>
                    @if (item.AutoresRecursos != null && item.AutoresRecursos.Any())
                        {
                            foreach (var autorRecurso in item.AutoresRecursos)
                            {
                    <span>
                        @autorRecurso.Autor.Nombres @autorRecurso.Autor.Apellidos
                    </span>
                                if (autorRecurso.EsPrincipal)
                                {
                    <span class="badge badge-primary">Principal</span>
                                }
                    <br />
                            }
                        }
                        else
                        {
                    <em>Sin autores</em>
                        }
                </td>
                <td>
                    @if (item.Editorial != null)
                        {
                    @item.Editorial.Nombre
                        }
                        else
                        {
                    <em>N/A</em>
                        }
                </td>
                <td>
                    @if (item.TipoRecurso != null)
                        {
                    @item.TipoRecurso.Nombre
                        }
                        else
                        {
                    <em>N/A</em>
                        }
                </td>
                <td>@item.annopublic</td>
                <td>
                    @if (!string.IsNullOrEmpty(item.PalabrasBusqueda))
                        {
                    @item.PalabrasBusqueda
                        }
                        else
                        {
                    <em>Sin palabras clave</em>
                        }
                </td>
                <td>
                    <a asp-controller="Recursos" asp-action="Details" asp-route-id="@item.IdRec" class="btn btn-sm btn-info">Ver Detalles</a>
                </td>
            </tr>
            }
        </tbody>
    </table>
}
else
{
    <div class="alert alert-warning" role="alert">
        <strong>No se encontraron resultados.</strong> Intente modificar sus criterios de búsqueda.
    </div>
}

    <div class="mt-3">
        <a asp-action="Buscar" class="btn btn-primary">Nueva Búsqueda</a>
        <a asp-action="Index" class="btn btn-secondary">Volver al Inicio</a>
    </div>
